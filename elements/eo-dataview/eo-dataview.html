<link rel="import" href="../expand-button/expand-button.html">

<dom-module id="eo-dataview">
  <template>
    <style>
      expand-button {
        --button-height: 1.5em;
        vertical-align: middle;
      }

      button {
        margin-left: 1em;
      }
    </style>

    <h2><expand-button expanded={{!hidden}}></expand-button>Data view</h2>
    <div hidden$="{{hidden}}">
      <ul>
        <template id="repeater" is="dom-repeat" items="{{words}}" as="word" sort="_sort">
          <li>{{word.word}}<button on-tap="_deleteWord">delete</button></li>
        </template>
      </ul>
      <input id="input" on-keyup="_handleInput">
    </div>
  </template>

  <script>
    Polymer({
      is: 'eo-dataview',

      properties: {
        words: {
          notify: true
        }
      },

      _handleInput: function(e) {
        if (e.keyCode == 13) {
          // Enter
          this.push('words', {
            word: e.target.value
          });
          e.target.value = null;

          this.async(function() {
            this.$.input.scrollIntoView(false);
          });
        }
      },

      _deleteWord: function(e) {
        this.arrayDelete('words', this.$.repeater.itemForElement(e.target));
        this.$.input.focus();
      },

      _sort: function(a, b) {
        return a.word.localeCompare(b.word);
      }
    });
  </script>
</dom-module>
