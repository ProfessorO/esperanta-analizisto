<link rel="import" href="../eo-parser/eo-parser.html">

<dom-module id="eo-ui">
  <template>
    <style>
      button {
        display: block;
      }
    </style>

    <h2>Input</h2>
    <textarea id="source" cols="80" rows="20">Alicio, jam longan tempon sidinte apud sia fratino sur la deklivo, tre enuiĝis pro senokupo. Unu, du foje ŝi prove rigardis en la libron kiun la fratino legas, sed povis vidi en ĝi nek desegnojn nek konversaciojn, kaj "por kio utilas libro," pensis ŝi, "enhavanta nek desegnojn nek konversaciojn?" Ŝi do ekpripensis—ne tre vigle ĉar la tago estis varma, kaj ŝi sentis sin tre dormema—ĉu la plezuro fari ĉenon el lekantetoj valorus la laboron sin levi kaj kolekti lekantetojn, kiam tutapude preterkuris Blanka kuniklo kun paleruĝaj okuloj.</textarea>
    <button on-tap="go">Go</button>

    <h2>Results</h2>
    <pre id="results"></pre>

    <eo-parser id="parser" words="{{words}}"></eo-parser>
  </template>

  <script>
    Polymer({
      is: 'eo-ui',

      properties: {
        words: {
          observer: 'go'
        }
      },

      go: function() {
        this.debounce('go', function() {
          if (this.words.length) {
            let text = this.$.source.value;
            let results = this.$.parser.analyze(text);

            console.log(results);
            this.$.results.innerHTML = JSON.stringify(results.zipped, null, 2);
          }
        });
      }
    });
  </script>
</dom-module>
