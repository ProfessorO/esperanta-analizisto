<link rel="import" href="../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">

<dom-module id="eo-auth">
  <template>

    <style>
      paper-button {
        margin-left: -0.57em;
        color: #3f51b5;
      }

      #name {
        font-weight: bold;
      }
    </style>

    <firebase-auth
      id="auth"
      provider="google"
      signed-in="{{signedIn}}"
      user="{{user}}"></firebase-auth>

    <paper-button on-tap="authButton">{{_buttonLabel(signedIn)}}</paper-button>

    <span hidden$="{{!signedIn}}">
      <span id="name">{{user.displayName}}</span>
      <template is="dom-if" if="{{settings.showEmail}}">({{user.email}})</template>
    </span>

  </template>

  <script>
    Polymer({
      is: 'eo-auth',

      properties: {
        user: {
          notify: true
        },

        signedIn: {
          value: false
        },

        settings: Object
      },

      authButton: function() {
        if (this.signedIn) {
          this.$.auth.signOut();
        } else {
          this.$.auth.signInWithPopup();
        }
      },

      _buttonLabel: function(signedIn) {
        return signedIn ? 'Sign out' : 'Sign in';
      }
    });
  </script>
</dom-module>
